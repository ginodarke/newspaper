import{b as p,r,j as e,C as N,B as b,d as w,u as k}from"./index-CIYHIpx5.js";import{u as S,L as C,A,a as L}from"./ArticleCard-Bkjo2ccO.js";import{b as E,c as z}from"./news-oK27dgwQ.js";import{m as M}from"./proxy-Dml9GGO8.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=p("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=p("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function F({article:s,onSave:o,onShare:l,onClose:h}){const[t,d]=r.useState(null),[a,i]=r.useState(!1),[n,m]=r.useState("content"),y=async()=>{if(!(t||a)){i(!0);try{const x=await E(s);d(x)}catch(x){console.error("Error loading summary:",x)}finally{i(!1)}}};return e.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s.category}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"â€¢"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.source})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.readTime," min read"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.views," views"]})]})]})]}),e.jsx("h1",{className:"text-3xl font-bold",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.author.avatar,alt:s.author.name,className:"h-10 w-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.author.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.publishedAt).toLocaleDateString()})]})]}),e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full rounded-lg object-cover"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex border-b",children:[e.jsx("button",{className:`px-4 py-2 text-sm font-medium ${n==="content"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-gray-700 dark:hover:text-gray-300"}`,onClick:()=>m("content"),children:"Content"}),e.jsx("button",{className:`px-4 py-2 text-sm font-medium ${n==="summary"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-gray-700 dark:hover:text-gray-300"}`,onClick:()=>m("summary"),children:"AI Summary"})]}),n==="content"&&e.jsx("div",{className:"mt-4 prose prose-sm max-w-none",children:e.jsx("p",{children:s.content})}),n==="summary"&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:s.aiSummary}),!t&&!a&&e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700",onClick:y,children:"Load Full Summary"}),a&&e.jsx("p",{children:"Loading full summary..."}),t&&e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{children:t})})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"inline-flex items-center px-3 py-1 text-sm font-medium border border-gray-300 rounded-md hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700",onClick:()=>o==null?void 0:o(s.id),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Save"]}),e.jsxs("button",{className:"inline-flex items-center px-3 py-1 text-sm font-medium border border-gray-300 rounded-md hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700",onClick:()=>l==null?void 0:l(s),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Share"]})]}),e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"Read original article"})]})]})})}function P(){const{query:s}=w(),o=k(),[l,h]=r.useState([]),[t,d]=r.useState(!0),[a,i]=r.useState(null),[n,m]=r.useState(null),[y,x]=r.useState(null),{ref:f}=S();r.useEffect(()=>{if(!s){o("/");return}(async()=>{try{d(!0);const u=await z(s);h(u)}catch(u){console.error("Error searching articles:",u),i("Failed to fetch search results. Please try again later.")}finally{d(!1)}})()},[s,o]);const g=()=>{m(null)},j=async c=>{console.log("Save article:",c)},v=async c=>{console.log("Share article:",c)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Search Results: ",e.jsx("span",{className:"text-primary",children:s})]}),t&&e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(C,{size:"large"})}),a&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 my-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{children:a})]})}),!t&&!a&&l.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1M19 20a2 2 0 002-2V8a2 2 0 00-2-2h-5a2 2 0 00-2 2v10a2 2 0 002 2h5zM2 10h8"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No results found"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Try different search terms or browse categories instead."})]}),!t&&!a&&l.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(A,{children:l.map(c=>e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(L,{article:c,onSave:j,onShare:v})},c.id))})}),e.jsx("div",{ref:f,className:"h-10 mt-8"}),n&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:[e.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx(F,{article:n,onClose:g})]})})]})}export{P as default};
