import{b as v,r as t,a as S,j as e}from"./index-CIYHIpx5.js";import{u as b,A as h,a as u}from"./ArticleCard-Bkjo2ccO.js";import{g as A}from"./news-oK27dgwQ.js";import{m as g}from"./proxy-Dml9GGO8.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=v("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function C(){const[a,p]=t.useState([]),[r,c]=t.useState(!0),[l,o]=t.useState(null),[E,f]=t.useState(1),[i,y]=t.useState(!0),{user:L}=S(),{ref:j,inView:d}=b();t.useEffect(()=>{n()},[]),t.useEffect(()=>{d&&i&&!r&&(f(s=>s+1),n())},[d,i,r]);const n=async()=>{try{c(!0);const s=await A();s.length===0?y(!1):p(N=>[...N,...s])}catch(s){o("Failed to load articles. Please try again later."),console.error("Error loading articles:",s)}finally{c(!1)}},m=async s=>{console.log("Save article:",s)},x=async s=>{console.log("Share article:",s)};return l?e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-red-600 mb-2",children:"Error"}),e.jsx("p",{className:"text-muted-foreground",children:l}),e.jsx("button",{onClick:()=>{o(null),n()},className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Try Again"})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Your News Feed"}),a.length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Featured Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(h,{children:a.slice(0,3).map(s=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(u,{article:s,onSave:m,onShare:x})},s.id))})})]}),a.length>3&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Latest Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(h,{children:a.slice(3).map(s=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(u,{article:s,onSave:m,onShare:x})},s.id))})})]}),e.jsxs("div",{ref:j,className:"flex justify-center items-center py-8",children:[r&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading more articles..."})]}),!i&&!r&&a.length>0&&e.jsx("p",{className:"text-muted-foreground",children:"No more articles to load."})]})]})}export{C as default};
