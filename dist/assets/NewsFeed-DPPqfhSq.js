import{r as a,j as e,A as b,m as j}from"./vendor-Bm8ggWCn.js";import{u as E}from"./index-DAs0h1ky.js";import{b as L,c as k}from"./news-y6q2ucae.js";import{A as N}from"./ArticleCard-Dh4eiFHY.js";import{k as F,l as T,m as R}from"./ui-OeHMmaS8.js";import"./three-CHCbE9v9.js";function M(){const[v,w]=a.useState([]),[o,h]=a.useState(!0),[n,u]=a.useState(null),[s,c]=a.useState(1),[d,A]=a.useState(1),{user:g}=E(),m=12;a.useEffect(()=>{x()},[]);const x=async()=>{try{h(!0);let r;if(g)try{const l=await L(g.id);l&&(r=l)}catch(l){console.error("Error getting user location from preferences:",l)}const i=await k(null,r);w(i),A(Math.ceil(i.length/m))}catch(r){u("Failed to load articles. Please try again later."),console.error("Error loading articles:",r)}finally{h(!1)}},p=async r=>{console.log("Save article:",r)},y=async r=>{console.log("Share article:",r)},S=()=>{s<d&&(c(s+1),window.scrollTo({top:0,behavior:"smooth"}))},P=()=>{s>1&&(c(s-1),window.scrollTo({top:0,behavior:"smooth"}))},f=s*m,C=f-m,t=v.slice(C,f);return n?e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-red-600 mb-2",children:"Error"}),e.jsx("p",{className:"text-muted-foreground",children:n}),e.jsx("button",{onClick:()=>{u(null),x()},className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Try Again"})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Your News Feed"}),o&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(F,{className:"h-10 w-10 animate-spin text-primary mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading articles..."})]}),!o&&t.length>0&&s===1&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Featured Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:e.jsx(b,{children:t.slice(0,2).map(r=>e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"lg:col-span-1",children:e.jsx(N,{article:r,onSave:p,onShare:y})},r.id))})})]}),!o&&t.length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:s===1?"Latest Articles":`Page ${s}`}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(b,{children:(s===1?t.slice(2):t).map(r=>e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(N,{article:r,onSave:p,onShare:y})},r.id))})})]}),!o&&t.length>0&&e.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-2",children:[e.jsx("button",{onClick:P,disabled:s===1,className:"p-2 rounded-md border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex items-center space-x-2",children:Array.from({length:d},(r,i)=>i+1).map(r=>e.jsx("button",{onClick:()=>{c(r),window.scrollTo({top:0,behavior:"smooth"})},className:`px-3 py-1 rounded-md ${s===r?"bg-primary text-white":"border border-gray-300 hover:bg-gray-100"}`,children:r},r))}),e.jsx("button",{onClick:S,disabled:s===d,className:"p-2 rounded-md border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(R,{className:"h-5 w-5"})})]}),!o&&t.length===0&&!n&&e.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-8 rounded-lg max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"No Articles Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"We couldn't find any articles that match your preferences. Try updating your interests in your profile."}),e.jsx("button",{onClick:x,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:"Refresh"})]})})]})}export{M as default};
