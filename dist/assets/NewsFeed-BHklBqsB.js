import{r as i,j as e,u as P,a as W}from"./index-Be2bsAiI.js";import{T as H}from"./ThemeToggle-C7UO3YWW.js";import{L as R,A as j,a as U}from"./LoadingSpinner-DcVqH7Bf.js";import{b as $,c as D,d as F}from"./news-CF8wZy0R.js";import{A as I}from"./3DElements-vpX_uOhm.js";import{m as s}from"./proxy-RU92w1vL.js";function V({onSearch:t,placeholder:d="Search articles..."}){const[a,o]=i.useState(""),l=x=>{x.preventDefault(),a.trim()&&t(a)};return e.jsxs("form",{onSubmit:l,className:"relative flex items-center w-full",children:[e.jsx("input",{type:"text",value:a,onChange:x=>o(x.target.value),placeholder:d,className:`w-full py-2 pl-10 pr-4 rounded-md border border-gray-300 dark:border-gray-600 
                 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent
                 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-400 dark:text-gray-500",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}),e.jsxs("button",{type:"submit",className:`absolute inset-y-0 right-0 flex items-center px-3 
                  text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-blue-400`,children:[e.jsx("span",{className:"sr-only",children:"Search"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})})]})]})}function _({article:t,onClose:d}){const[a,o]=i.useState("article");return e.jsxs("div",{className:"flex flex-col h-full max-h-[90vh]",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white line-clamp-1",children:t.title}),e.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"flex px-4 -mb-px",children:[e.jsx("button",{onClick:()=>o("article"),className:`py-3 px-4 text-sm font-medium border-b-2 ${a==="article"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Article"}),e.jsx("button",{onClick:()=>o("analysis"),className:`py-3 px-4 text-sm font-medium border-b-2 ${a==="analysis"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"AI Analysis"}),e.jsx("button",{onClick:()=>o("context"),className:`py-3 px-4 text-sm font-medium border-b-2 ${a==="context"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Related Context"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a==="article"&&e.jsxs("div",{className:"space-y-4",children:[t.imageUrl&&e.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-auto max-h-[300px] object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 p-3 bg-gradient-to-t from-black/70 to-transparent w-full",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:t.source}),e.jsx("span",{className:"text-white text-sm",children:new Date(t.publishedAt).toLocaleDateString()})]})})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 rounded-full",children:t.category}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(t.publishedAt).toLocaleString()})]}),e.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.summary}),e.jsx("div",{className:"mt-4 text-gray-700 dark:text-gray-300",children:t.content?e.jsx("div",{dangerouslySetInnerHTML:{__html:t.content}}):e.jsx("p",{children:t.description||"Full article content is not available at this moment. Please check back later or visit the original source."})})]}),t.url&&e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-md shadow-sm hover:bg-blue-600 transition-colors",children:[e.jsxs("span",{children:["Read on ",t.source]}),e.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]}),a==="analysis"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-100 dark:border-blue-800",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-800 dark:text-blue-300 mb-2",children:"AI Summary"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-200",children:t.summary||"This article discusses "+t.title+". The key points include the latest developments and potential future impacts."})]}),t.relevanceReason&&e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-100 dark:border-green-800",children:[e.jsx("h3",{className:"text-lg font-medium text-green-800 dark:text-green-300 mb-2",children:"Why This Matters To You"}),e.jsx("p",{className:"text-green-700 dark:text-green-200",children:t.relevanceReason})]}),e.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/30 rounded-lg border border-purple-100 dark:border-purple-800",children:[e.jsx("h3",{className:"text-lg font-medium text-purple-800 dark:text-purple-300 mb-2",children:"Key Insights"}),e.jsxs("ul",{className:"list-disc pl-5 text-purple-700 dark:text-purple-200 space-y-1",children:[e.jsx("li",{children:"The article presents facts from multiple perspectives, helping to reduce potential bias."}),e.jsxs("li",{children:["The topic is trending with a ",Math.floor(Math.random()*30)+70,"% increase in coverage over the past week."]}),e.jsx("li",{children:"This information may affect decisions related to your selected interests."})]})]})]}),a==="context"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Historical Context"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"This topic has been developing over several months. Similar events occurred in previous years, with varying outcomes and public reception."})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Related Topics"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["Technology","Business","Innovation","Policy","Development"].map(l=>e.jsx("span",{className:"px-3 py-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-full text-sm",children:l},l))})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Similar Articles"}),e.jsx("ul",{className:"space-y-3 mt-2",children:[1,2,3].map(l=>e.jsxs("li",{className:"border-b border-gray-200 dark:border-gray-600 last:border-0 pb-2 last:pb-0",children:[e.jsxs("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline",children:["Related article about ",t.title.split(" ").slice(0,3).join(" "),"..."]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Published ",Math.floor(Math.random()*7)+1," days ago"]})]},l))})]})]})]})]})}function O(){const t=P(),{user:d}=W(),[a,o]=i.useState(null),[l,x]=i.useState([]),[h,p]=i.useState(!0),[g,b]=i.useState(""),[u,w]=i.useState("All"),[y,f]=i.useState(null),[k,N]=i.useState(null),[c,L]=i.useState(null),C=["All","Local","Technology","Business","Politics","Science","Health","Sports","Entertainment","World News"];i.useEffect(()=>{(async()=>{try{if(d){const n=await $(d.id);console.log("User preferences:",n),o(n);const m=await D(d.id);m&&(console.log("User location:",m),L(m))}else console.log("No user found, using default preferences"),o({categories:["Technology","Business"]})}catch(n){console.error("Error fetching preferences:",n),o({categories:["Technology","Business"]})}})()},[d]),i.useEffect(()=>{a&&(async()=>{p(!0),b("");try{await new Promise(E=>setTimeout(E,800));const m=await F(u==="All"?null:u,c||void 0);x(m)}catch(n){b(n.message||"Failed to fetch articles"),console.error("Error fetching articles:",n)}finally{p(!1)}})()},[u,a,c]);const A=r=>{w(r)},S=()=>{t("/profile")},M=r=>{f(r)},v=()=>{f(null)},T=r=>{N(k===r?null:r)},B={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},z={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-gray-800 transition-colors duration-200",children:[e.jsx(I,{}),e.jsx("header",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 shadow-md border-b border-gray-200 dark:border-gray-700 backdrop-blur-md bg-opacity-90 dark:bg-opacity-90",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s.h1,{className:"text-2xl font-bold tracking-tight text-blue-600 dark:text-blue-400",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:"NewspaperAI"}),e.jsx(s.span,{className:"bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.3},children:"Beta"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(V,{onSearch:r=>t(`/search?q=${r}`)}),e.jsx(H,{}),e.jsx(s.button,{onClick:S,className:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-800 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]}),c&&e.jsxs(s.div,{className:"mt-2 text-sm text-gray-600 dark:text-gray-300 flex items-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsxs("svg",{className:"w-4 h-4 mr-1 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:c.city||c.region||`${c.latitude.toFixed(2)}, ${c.longitude.toFixed(2)}`})]}),e.jsx("div",{className:"mt-4 overflow-x-auto hide-scrollbar",children:e.jsx("div",{className:"flex space-x-2 pb-1",children:C.map((r,n)=>e.jsx(s.button,{onClick:()=>A(r),className:`whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-colors ${u===r?"bg-blue-500 text-white shadow-sm dark:bg-blue-600":"bg-white text-gray-700 hover:bg-gray-100 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600"}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1+n*.05},whileHover:{y:-2},whileTap:{y:0},children:r==="Local"?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:r})]}):r},r))})})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h&&e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(R,{size:"large"})}),g&&!h&&e.jsx(s.div,{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 text-red-800 dark:text-red-300 rounded-lg p-4 my-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{children:g})]})}),!h&&!g&&l.length===0&&e.jsxs(s.div,{className:"text-center py-20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1M19 20a2 2 0 002-2V8a2 2 0 00-2-2h-5a2 2 0 00-2 2v10a2 2 0 002 2h5zM2 10h8"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"No articles found"}),e.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Try selecting a different category or updating your preferences."})]}),!h&&!g&&l.length>0&&e.jsx(s.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:B,initial:"hidden",animate:"visible",children:e.jsx(j,{children:l.map(r=>e.jsx(s.div,{variants:z,layout:!0,transition:{type:"spring",damping:20},children:e.jsx(U,{article:r,onClick:()=>M(r),onExpandClick:()=>T(r.id),isExpanded:k===r.id})},r.id))})})]}),y&&e.jsx(j,{children:e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 overflow-y-auto overflow-x-hidden flex items-center justify-center",children:[e.jsx(s.div,{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:v,initial:{opacity:0},animate:{opacity:1}}),e.jsx(s.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"relative w-full max-w-4xl max-h-[90vh] mx-auto my-8 overflow-hidden rounded-lg shadow-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:e.jsx(_,{article:y,onClose:v})})]})})]})}export{O as default};
