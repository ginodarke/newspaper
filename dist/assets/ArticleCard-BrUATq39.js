import{r as i,j as e,m as j}from"./vendor-Bm8ggWCn.js";import{e as b}from"./news-DQ963Plw.js";import{L as v}from"./index-DCqrE0Ib.js";function S({article:t,onSave:o,onShare:l,onClick:u}){const[a,y]=i.useState("article"),[n,h]=i.useState(null),[d,c]=i.useState(!1),[m,x]=i.useState(null),g=async r=>{if(y(r),r==="ai"&&!n&&!d)try{c(!0),x(null);const s=await b(t);h(s)}catch(s){console.error("Error getting AI summary:",s),x("Failed to get AI summary. Please try again later.")}finally{c(!1)}},p=(r,s)=>r?r.length>s?r.substring(0,s)+"...":r:"",f=t.publishedAt?new Date(t.publishedAt).toLocaleDateString():"Recently";return e.jsxs("div",{className:"h-full flex flex-col overflow-hidden hover:shadow-lg transition-shadow duration-300 cursor-pointer border rounded-lg bg-card text-card-foreground shadow",onClick:u,children:[e.jsxs("div",{className:"py-4 px-5 border-b",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"bg-primary/10 text-primary text-xs rounded-full px-2 py-1",children:t.source||"News"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:f})]}),e.jsx("h3",{className:"text-lg font-bold leading-tight line-clamp-2 hover:text-primary transition-colors",children:t.title})]}),t.imageUrl&&e.jsx("div",{className:"aspect-video relative overflow-hidden",children:e.jsx("img",{src:t.imageUrl,alt:t.title,className:"object-cover w-full h-full transform hover:scale-105 transition-transform duration-300",onError:r=>{const s=r.target;s.style.display="none"}})}),e.jsx("div",{className:"flex-grow p-4",children:e.jsxs("div",{className:"w-full mb-2",children:[e.jsxs("div",{className:"grid w-full grid-cols-2 mb-2 border rounded-lg overflow-hidden",children:[e.jsx("button",{className:`py-2 text-center text-sm ${a==="article"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,onClick:()=>g("article"),children:"Article"}),e.jsx("button",{className:`py-2 text-center text-sm ${a==="ai"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,onClick:()=>g("ai"),children:"AI Summary"})]}),e.jsxs("div",{className:"mt-2 min-h-[80px]",children:[a==="article"&&e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-3",children:t.description||"No description available"}),a==="ai"&&e.jsx(e.Fragment,{children:d?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(v,{size:"small"})}):m?e.jsx("div",{className:"text-sm text-red-500 py-2",children:m}):n?e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:p(n,180)})}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"Click to generate AI summary"})})]})]})}),e.jsxs("div",{className:"flex justify-between items-center py-3 px-5 border-t",children:[o&&e.jsxs("button",{className:"inline-flex items-center px-3 py-1 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",onClick:r=>{r.stopPropagation(),o(t.id)},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:e.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save"]}),l&&e.jsxs("button",{className:"inline-flex items-center px-3 py-1 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",onClick:r=>{r.stopPropagation(),l(t.id)},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[e.jsx("circle",{cx:"18",cy:"5",r:"3"}),e.jsx("circle",{cx:"6",cy:"12",r:"3"}),e.jsx("circle",{cx:"18",cy:"19",r:"3"}),e.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),e.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),"Share"]})]})]})}export{S as A};
