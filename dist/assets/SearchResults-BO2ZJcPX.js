import{j as t}from"./ui--n0l2wTA.js";import{r as u,i as E,u as M}from"./vendor-BvJ-yVPi.js";import{d as C}from"./news-BW5oRjg_.js";import{A as L}from"./ArticleCard-ClAHm5AA.js";import{L as z,A as I}from"./LoadingSpinner-CDGrN4lS.js";import{A as V,m as k}from"./animation-C8ivTUSO.js";import"./index-C_b6bG7S.js";import"./three-TYGphhMp.js";import"./icons-Bqiqei89.js";import"./utils-U3DZdfOV.js";var N=new Map,w=new WeakMap,R=0,B=void 0;function T(e){return e?(w.has(e)||(R+=1,w.set(e,R.toString())),w.get(e)):"0"}function O(e){return Object.keys(e).sort().filter(r=>e[r]!==void 0).map(r=>`${r}_${r==="root"?T(e.root):e[r]}`).toString()}function P(e){const r=O(e);let i=N.get(r);if(!i){const c=new Map;let l;const a=new IntersectionObserver(n=>{n.forEach(s=>{var o;const h=s.isIntersecting&&l.some(f=>s.intersectionRatio>=f);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=h),(o=c.get(s.target))==null||o.forEach(f=>{f(h,s)})})},e);l=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:r,observer:a,elements:c},N.set(r,i)}return i}function W(e,r,i={},c=B){if(typeof window.IntersectionObserver>"u"&&c!==void 0){const o=e.getBoundingClientRect();return r(c,{isIntersecting:c,target:e,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}const{id:l,observer:a,elements:n}=P(i),s=n.get(e)||[];return n.has(e)||n.set(e,s),s.push(r),a.observe(e),function(){s.splice(s.indexOf(r),1),s.length===0&&(n.delete(e),a.unobserve(e)),n.size===0&&(a.disconnect(),N.delete(l))}}function _({threshold:e,delay:r,trackVisibility:i,rootMargin:c,root:l,triggerOnce:a,skip:n,initialInView:s,fallbackInView:o,onChange:h}={}){var f;const[p,b]=u.useState(null),v=u.useRef(h),[j,y]=u.useState({inView:!!s,entry:void 0});v.current=h,u.useEffect(()=>{if(n||!p)return;let g;return g=W(p,(A,S)=>{y({inView:A,entry:S}),v.current&&v.current(A,S),S.isIntersecting&&a&&g&&(g(),g=void 0)},{root:l,rootMargin:c,threshold:e,trackVisibility:i,delay:r},o),()=>{g&&g()}},[Array.isArray(e)?e.toString():e,p,l,c,a,n,i,o,r]);const d=(f=j.entry)==null?void 0:f.target,m=u.useRef(void 0);!p&&d&&!a&&!n&&m.current!==d&&(m.current=d,y({inView:!!s,entry:void 0}));const x=[b,j.inView,j.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}function X(){const{query:e}=E(),r=M(),[i,c]=u.useState([]),[l,a]=u.useState(!0),[n,s]=u.useState(null),[o,h]=u.useState(null),[f,p]=u.useState(null),{ref:b}=_();u.useEffect(()=>{if(!e){r("/");return}(async()=>{try{a(!0);const m=await C(e);c(m)}catch(m){console.error("Error searching articles:",m),s("Failed to fetch search results. Please try again later.")}finally{a(!1)}})()},[e,r]);const v=()=>{h(null)},j=async d=>{console.log("Save article:",d)},y=async d=>{console.log("Share article:",d)};return t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Search Results: ",t.jsx("span",{className:"text-primary",children:e})]}),l&&t.jsx("div",{className:"flex justify-center py-20",children:t.jsx(z,{size:"large"})}),n&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 my-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),t.jsx("span",{children:n})]})}),!l&&!n&&i.length===0&&t.jsxs("div",{className:"text-center py-20",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1M19 20a2 2 0 002-2V8a2 2 0 00-2-2h-5a2 2 0 00-2 2v10a2 2 0 002 2h5zM2 10h8"})}),t.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No results found"}),t.jsx("p",{className:"mt-1 text-gray-500",children:"Try different search terms or browse categories instead."})]}),!l&&!n&&i.length>0&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.jsx(V,{children:i.map(d=>t.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t.jsx(L,{article:d,onSave:j,onShare:y})},d.id))})}),t.jsx("div",{ref:b,className:"h-10 mt-8"}),o&&t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:[t.jsx("button",{onClick:v,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx(I,{article:o,onClose:v})]})})]})}export{X as default};
